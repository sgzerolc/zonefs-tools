[sam@resources tests]$ sudo ./zonefs-tests.sh /dev/vda
Gathering information on /dev/vda...
zonefs-tests on /dev/vda:
  12 zones (0 conventional zones, 12 sequential zones)
  131072 512B sectors zone size (64 MiB)
  0 max open zones
  0 max active zones
Running tests
  Test 0001:  mkzonefs (options)                                   ... PASS
  Test 0002:  mkzonefs (force format)                              ... PASS
  Test 0003:  mkzonefs (invalid device)                            ... PASS
  Test 0004:  mkzonefs (super block zone state)                    ... PASS
  Test 0020:  mount (default)                                      ... PASS
  Test 0021:  mount (invalid device)                               ... PASS
  Test 0022:  mount (check mount directory sub-directories)        ... PASS
  Test 0023:  mount (options)                                      ... PASS
  Test 0040:  Number of files (default)                            ... PASS
  Test 0041:  Number of files (aggr_cnv)                           ... skip
  Test 0042:  Number of files using stat (default)                 ... PASS
  Test 0043:  Number of files using stat (aggr_cnv)                ... skip
  Test 0044:  Number of blocks using stat (default)                ... FAIL
  Test 0045:  Number of blocks using stat (aggr_cnv)               ... FAIL
  Test 0060:  Files permissions (default)                          ... PASS
  Test 0061:  Files permissions (aggr_cnv)                         ... skip
  Test 0062:  Files permissions (set value)                        ... PASS
  Test 0063:  Files permissions (set value + aggr_cnv)             ... skip
  Test 0080:  Files owner (default)                                ... PASS
  Test 0081:  Files owner (aggr_cnv)                               ... skip
  Test 0082:  Files owner (set value)                              ... PASS
  Test 0083:  Files owner (set value + aggr_cnv)                   ... skip
  Test 0100:  Files size (default)                                 ... PASS
  Test 0101:  Files size (aggr_cnv)                                ... skip
  Test 0200:  Conventional file truncate                           ... skip
  Test 0201:  Conventional file truncate (aggr_cnv)                ... skip
  Test 0202:  Conventional file unlink                             ... skip
  Test 0203:  Conventional file unlink (aggr_cnv)                  ... skip
  Test 0204:  Conventional file random write                       ... skip
  Test 0205:  Conventional file random write (direct)              ... skip
  Test 0206:  Conventional file random write (aggr_cnv)            ... skip
  Test 0207:  Conventional file random write (aggr_cnv, direct)    ... skip
  Test 0208:  Conventional file mmap read/write                    ... skip
  Test 0209:  Conventional file mmap read/write (aggr_cnv)         ... skip
  Test 0210:  Conventional file seq write                          ... skip
  Test 0211:  Conventional file seq write (direct)                 ... skip
  Test 0212:  Conventional file seq write (aggr_cnv)               ... skip
  Test 0213:  Conventional file seq write (aggr_cnv, direct)       ... skip
  Test 0214:  Conventional file seq write (large IOs)              ... skip
  Test 0215:  Conventional file seq write (aggr_cnv, large IOs)    ... skip
  Test 0216:  Conventional file seq read                           ... skip
  Test 0217:  Conventional file seq read (direct)                  ... skip
  Test 0218:  Conventional file seq read (aggr_cnv)                ... skip
  Test 0219:  Conventional file seq read (aggr_cnv, direct)        ... skip
  Test 0220:  Conventional file seq read (large IOs)               ... skip
  Test 0221:  Conventional file seq read (aggr_cnv, large IOs)     ... skip
  Test 0222:  Conventional file readahead                          ... skip
  Test 0223:  Conventional file read beyond eof                    ... skip
  Test 0300:  Sequential file truncate                             ... PASS
  Test 0301:  Sequential file unlink                               ... PASS
  Test 0302:  Sequential file buffered write IO                    ... PASS
  Test 0303:  Sequential file overwrite                            ... PASS
  Test 0304:  Sequential file unaligned write (sync IO)            ... PASS
  Test 0305:  Sequential file unaligned write (async IO)           ... PASS
  Test 0306:  Sequential file append (sync)                        ... FAIL
  Test 0307:  Sequential file append (async)                       ... FAIL
  Test 0309:  Sequential file mmap read/write                      ... PASS
  Test 0310:  sequential file 4K synchronous write                 ... FAIL
  Test 0311:  Sequential file large synchronous write              ... PASS
  Test 0312:  Sequential file explicit-open zone resources         ... skip
  Test 0320:  Sequential file random read (buffered)               ... PASS
  Test 0321:  Sequential file random read (direct)                 ... PASS
  Test 0322:  Sequential file seq read (buffered)                  ... PASS
  Test 0323:  Sequential file seq read (direct)                    ... PASS
  Test 0324:  Sequential file readahead                            ... PASS
  Test 0325:  Sequential file read beyond eof                      ... FAIL
  Test 0400:  Swap file on conventional file                       ... skip
  Test 0401:  Swap file on sequential file                         ... PASS
  Test 0510:  Sysfs attr after format                              ... PASS
  Test 0511:  Sysfs seq files active after mount (open zones)      ... PASS
  Test 0512:  Sysfs seq files active after mount (active zones)    ... PASS
  Test 0513:  Sysfs seq files write-open (default)                 ... PASS
  Test 0514:  Sysfs seq files write-open (explicit-open)           ... PASS
  Test 0515:  Sysfs seq files active after write (default)         ... FAIL
  Test 0516:  Sysfs conv files write-open                          ... skip
  Test 0517:  Sysfs conv files active after write                  ... skip

69 / 76 tests passed

## Test scripts/0306.sh (Sequential file append (sync))

Check sequential file append (sync)
/dev/vda: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  0 conventional zones, 12 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: f428f19a-9920-49fd-a5e9-5718f8a73419
Resetting sequential zones
Writing super block
Check append writes with O_APPEND
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.000375049 s, 10.9 MB/s
497 IOs done in 75 ms (75892 us)
    6548 IOPS, 885.185 MB/s
Check append writes with RWF_APPEND
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.000341518 s, 12.0 MB/s
00000: WRITE 135168 B at 0 failed 5 (Input/output error)
 --> FAILED
FAILED

