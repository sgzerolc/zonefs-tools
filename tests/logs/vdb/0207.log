## Test 0207: Conventional file random write (aggr_cnv, direct)

/usr/local/bin/fio
Check conventional file random write, aggr_cnv, direct (sync)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: enabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 428c530d-7617-4075-9b24-f59a5c6305ec
Resetting sequential zones
Writing super block
cnv_rndwr: (g=0): rw=randwrite, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process

cnv_rndwr: (groupid=0, jobs=1): err= 0: pid=3377: Mon Jan 16 20:43:07 2023
  read: IOPS=2534, BW=317MiB/s (332MB/s)(320MiB/1010msec)
    clat (usec): min=77, max=2412, avg=199.46, stdev=82.41
     lat (usec): min=77, max=2413, avg=199.55, stdev=82.42
    clat percentiles (usec):
     |  1.00th=[   90],  5.00th=[  115], 10.00th=[  128], 20.00th=[  151],
     | 30.00th=[  161], 40.00th=[  178], 50.00th=[  194], 60.00th=[  208],
     | 70.00th=[  225], 80.00th=[  247], 90.00th=[  277], 95.00th=[  302],
     | 99.00th=[  343], 99.50th=[  371], 99.90th=[  478], 99.95th=[ 2212],
     | 99.99th=[ 2409]
  write: IOPS=2281, BW=285MiB/s (299MB/s)(320MiB/1122msec); 0 zone resets
    clat (usec): min=105, max=2660, avg=232.94, stdev=116.48
     lat (usec): min=289, max=6353, avg=436.60, stdev=211.97
    clat percentiles (usec):
     |  1.00th=[  125],  5.00th=[  143], 10.00th=[  159], 20.00th=[  176],
     | 30.00th=[  188], 40.00th=[  204], 50.00th=[  217], 60.00th=[  231],
     | 70.00th=[  247], 80.00th=[  273], 90.00th=[  306], 95.00th=[  338],
     | 99.00th=[  824], 99.50th=[  898], 99.90th=[ 2245], 99.95th=[ 2376],
     | 99.99th=[ 2671]
   bw (  KiB/s): min=75008, max=309760, per=74.80%, avg=218453.33, stdev=125761.50, samples=3
   iops        : min=  586, max= 2420, avg=1706.67, stdev=982.51, samples=3
  lat (usec)   : 100=1.13%, 250=75.02%, 500=23.07%, 750=0.18%, 1000=0.51%
  lat (msec)   : 4=0.10%
  cpu          : usr=48.22%, sys=2.82%, ctx=5184, majf=0, minf=85
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=2560,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=317MiB/s (332MB/s), 317MiB/s-317MiB/s (332MB/s-332MB/s), io=320MiB (336MB), run=1010-1010msec
  WRITE: bw=285MiB/s (299MB/s), 285MiB/s-285MiB/s (299MB/s-299MB/s), io=320MiB (336MB), run=1122-1122msec

Disk stats (read/write):
  vdb: ios=2560/2560, merge=0/0, ticks=468/548, in_queue=1016, util=94.62%
Check conventional file random write, aggr_cnv, direct (async)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: enabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: e27e181b-54c6-4008-af18-6bca58dea885
Resetting sequential zones
Writing super block
cnv_rndwr: (g=0): rw=randwrite, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=libaio, iodepth=64
fio-3.32
Starting 1 process

cnv_rndwr: (groupid=0, jobs=1): err= 0: pid=3389: Mon Jan 16 20:43:09 2023
  read: IOPS=4885, BW=611MiB/s (640MB/s)(320MiB/524msec)
    slat (nsec): min=4949, max=52381, avg=9512.20, stdev=1800.96
    clat (usec): min=191, max=14880, avg=12583.66, stdev=1557.75
     lat (usec): min=201, max=14890, avg=12593.17, stdev=1557.98
    clat percentiles (usec):
     |  1.00th=[ 2966],  5.00th=[12780], 10.00th=[12780], 20.00th=[12780],
     | 30.00th=[12780], 40.00th=[12911], 50.00th=[12911], 60.00th=[12911],
     | 70.00th=[12911], 80.00th=[12911], 90.00th=[12911], 95.00th=[13042],
     | 99.00th=[13304], 99.50th=[13435], 99.90th=[13698], 99.95th=[14091],
     | 99.99th=[14877]
  write: IOPS=4245, BW=531MiB/s (556MB/s)(320MiB/603msec); 0 zone resets
    slat (usec): min=196, max=1564, avg=232.09, stdev=73.16
    clat (usec): min=115, max=35666, avg=14243.27, stdev=2032.21
     lat (usec): min=333, max=37231, avg=14475.36, stdev=2087.14
    clat percentiles (usec):
     |  1.00th=[ 5800],  5.00th=[13829], 10.00th=[13960], 20.00th=[13960],
     | 30.00th=[13960], 40.00th=[14091], 50.00th=[14091], 60.00th=[14091],
     | 70.00th=[14222], 80.00th=[14484], 90.00th=[14746], 95.00th=[15270],
     | 99.00th=[21890], 99.50th=[27132], 99.90th=[34341], 99.95th=[34866],
     | 99.99th=[35914]
   bw (  KiB/s): min=132352, max=523008, per=60.30%, avg=327680.00, stdev=276235.51, samples=2
   iops        : min= 1034, max= 4086, avg=2560.00, stdev=2158.09, samples=2
  lat (usec)   : 250=0.04%, 500=0.06%, 750=0.06%, 1000=0.06%
  lat (msec)   : 2=0.29%, 4=0.53%, 10=1.66%, 20=96.62%, 50=0.68%
  cpu          : usr=88.53%, sys=6.22%, ctx=5150, majf=0, minf=82
  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=1.2%, >=64=97.5%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.1%, >=64=0.0%
     issued rwts: total=2560,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=64

Run status group 0 (all jobs):
   READ: bw=611MiB/s (640MB/s), 611MiB/s-611MiB/s (640MB/s-640MB/s), io=320MiB (336MB), run=524-524msec
  WRITE: bw=531MiB/s (556MB/s), 531MiB/s-531MiB/s (556MB/s-556MB/s), io=320MiB (336MB), run=603-603msec

Disk stats (read/write):
  vdb: ios=2560/2560, merge=0/0, ticks=409/365, in_queue=774, util=89.18%
PASS

