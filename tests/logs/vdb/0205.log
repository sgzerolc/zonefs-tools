## Test 0205: Conventional file random write (direct)

/usr/local/bin/fio
Check conventional file random write, direct IO (sync)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: baf0a96a-2c75-405f-9b3b-e5affa904e50
Resetting sequential zones
Writing super block
cnv_rndwr: (g=0): rw=randwrite, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process

cnv_rndwr: (groupid=0, jobs=1): err= 0: pid=3305: Mon Jan 16 20:42:59 2023
  read: IOPS=2485, BW=311MiB/s (326MB/s)(64.0MiB/206msec)
    clat (usec): min=111, max=3339, avg=217.18, stdev=187.76
     lat (usec): min=111, max=3339, avg=217.29, stdev=187.76
    clat percentiles (usec):
     |  1.00th=[  123],  5.00th=[  145], 10.00th=[  155], 20.00th=[  163],
     | 30.00th=[  172], 40.00th=[  190], 50.00th=[  200], 60.00th=[  206],
     | 70.00th=[  219], 80.00th=[  245], 90.00th=[  281], 95.00th=[  306],
     | 99.00th=[  355], 99.50th=[  553], 99.90th=[ 3326], 99.95th=[ 3326],
     | 99.99th=[ 3326]
  write: IOPS=1610, BW=201MiB/s (211MB/s)(64.0MiB/318msec); 0 zone resets
    clat (usec): min=136, max=1175, avg=323.81, stdev=242.72
     lat (usec): min=325, max=2225, avg=617.00, stdev=492.85
    clat percentiles (usec):
     |  1.00th=[  149],  5.00th=[  161], 10.00th=[  180], 20.00th=[  188],
     | 30.00th=[  200], 40.00th=[  219], 50.00th=[  233], 60.00th=[  251],
     | 70.00th=[  277], 80.00th=[  330], 90.00th=[  865], 95.00th=[  979],
     | 99.00th=[ 1074], 99.50th=[ 1106], 99.90th=[ 1172], 99.95th=[ 1172],
     | 99.99th=[ 1172]
   bw (  KiB/s): min=131072, max=131072, per=63.60%, avg=131072.00, stdev= 0.00, samples=1
   iops        : min= 1024, max= 1024, avg=1024.00, stdev= 0.00, samples=1
  lat (usec)   : 250=70.70%, 500=22.66%, 750=0.59%, 1000=4.20%
  lat (msec)   : 2=1.66%, 4=0.20%
  cpu          : usr=46.74%, sys=3.26%, ctx=1041, majf=0, minf=29
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=512,512,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=311MiB/s (326MB/s), 311MiB/s-311MiB/s (326MB/s-326MB/s), io=64.0MiB (67.1MB), run=206-206msec
  WRITE: bw=201MiB/s (211MB/s), 201MiB/s-201MiB/s (211MB/s-211MB/s), io=64.0MiB (67.1MB), run=318-318msec

Disk stats (read/write):
  vdb: ios=214/512, merge=0/0, ticks=36/151, in_queue=187, util=78.31%
Check conventional file random write, direct IO (async)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 56cb0343-62b1-4a07-baad-419d3dc4e1e1
Resetting sequential zones
Writing super block
cnv_rndwr: (g=0): rw=randwrite, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=libaio, iodepth=64
fio-3.32
Starting 1 process

cnv_rndwr: (groupid=0, jobs=1): err= 0: pid=3315: Mon Jan 16 20:43:00 2023
  read: IOPS=4830, BW=604MiB/s (633MB/s)(64.0MiB/106msec)
    slat (usec): min=4, max=235, avg= 9.42, stdev=10.32
    clat (usec): min=196, max=13487, avg=11405.28, stdev=3195.61
     lat (usec): min=205, max=13492, avg=11414.70, stdev=3194.79
    clat percentiles (usec):
     |  1.00th=[  750],  5.00th=[ 3032], 10.00th=[ 5800], 20.00th=[10945],
     | 30.00th=[12780], 40.00th=[12780], 50.00th=[12780], 60.00th=[12780],
     | 70.00th=[12911], 80.00th=[12911], 90.00th=[12911], 95.00th=[13173],
     | 99.00th=[13304], 99.50th=[13435], 99.90th=[13435], 99.95th=[13435],
     | 99.99th=[13435]
  write: IOPS=3605, BW=451MiB/s (473MB/s)(64.0MiB/142msec); 0 zone resets
    slat (usec): min=196, max=1793, avg=272.56, stdev=164.09
    clat (usec): min=249, max=35736, avg=14447.29, stdev=4347.37
     lat (usec): min=474, max=37529, avg=14719.85, stdev=4472.99
    clat percentiles (usec):
     |  1.00th=[ 1385],  5.00th=[ 6063], 10.00th=[11863], 20.00th=[13960],
     | 30.00th=[13960], 40.00th=[14091], 50.00th=[14222], 60.00th=[14353],
     | 70.00th=[14615], 80.00th=[14877], 90.00th=[17171], 95.00th=[21627],
     | 99.00th=[31589], 99.50th=[34341], 99.90th=[35914], 99.95th=[35914],
     | 99.99th=[35914]
  lat (usec)   : 250=0.20%, 500=0.29%, 750=0.29%, 1000=0.39%
  lat (msec)   : 2=1.27%, 4=2.54%, 10=8.30%, 20=83.50%, 50=3.22%
  cpu          : usr=87.45%, sys=6.48%, ctx=1085, majf=0, minf=29
  IO depths    : 1=0.2%, 2=0.4%, 4=0.8%, 8=1.6%, 16=3.1%, 32=6.2%, >=64=87.7%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=99.8%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.2%, >=64=0.0%
     issued rwts: total=512,512,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=64

Run status group 0 (all jobs):
   READ: bw=604MiB/s (633MB/s), 604MiB/s-604MiB/s (633MB/s-633MB/s), io=64.0MiB (67.1MB), run=106-106msec
  WRITE: bw=451MiB/s (473MB/s), 451MiB/s-451MiB/s (473MB/s-473MB/s), io=64.0MiB (67.1MB), run=142-142msec

Disk stats (read/write):
  vdb: ios=0/456, merge=0/0, ticks=0/79, in_queue=79, util=51.41%
PASS

