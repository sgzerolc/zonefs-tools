## Test 0212: Conventional file seq write (aggr_cnv)

/usr/local/bin/fio
Check conventional file seq write, aggr_cnv (sync)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: enabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: eaf098f0-b8d7-4cba-b5f2-d406f6078315
Resetting sequential zones
Writing super block
cnv_seqwr: (g=0): rw=write, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process

cnv_seqwr: (groupid=0, jobs=1): err= 0: pid=3565: Mon Jan 16 20:43:32 2023
  read: IOPS=4115, BW=514MiB/s (539MB/s)(320MiB/622msec)
    clat (usec): min=7, max=2060, avg=28.16, stdev=44.57
     lat (usec): min=7, max=2060, avg=28.21, stdev=44.56
    clat percentiles (usec):
     |  1.00th=[    9],  5.00th=[   10], 10.00th=[   10], 20.00th=[   10],
     | 30.00th=[   10], 40.00th=[   11], 50.00th=[   35], 60.00th=[   42],
     | 70.00th=[   43], 80.00th=[   44], 90.00th=[   45], 95.00th=[   49],
     | 99.00th=[   59], 99.50th=[   64], 99.90th=[  182], 99.95th=[  453],
     | 99.99th=[ 2057]
  write: IOPS=4273, BW=534MiB/s (560MB/s)(320MiB/599msec); 0 zone resets
    clat (usec): min=27, max=190, avg=33.17, stdev=14.17
     lat (usec): min=211, max=1127, avg=233.36, stdev=95.00
    clat percentiles (usec):
     |  1.00th=[   29],  5.00th=[   29], 10.00th=[   29], 20.00th=[   30],
     | 30.00th=[   30], 40.00th=[   30], 50.00th=[   31], 60.00th=[   31],
     | 70.00th=[   32], 80.00th=[   32], 90.00th=[   37], 95.00th=[   42],
     | 99.00th=[  125], 99.50th=[  143], 99.90th=[  178], 99.95th=[  184],
     | 99.99th=[  190]
   bw (  KiB/s): min=114432, max=540928, per=59.90%, avg=327680.00, stdev=301578.21, samples=2
   iops        : min=  894, max= 4226, avg=2560.00, stdev=2356.08, samples=2
  lat (usec)   : 10=17.21%, 20=7.66%, 50=71.58%, 100=2.77%, 250=0.74%
  lat (usec)   : 500=0.02%
  lat (msec)   : 4=0.02%
  cpu          : usr=81.07%, sys=15.33%, ctx=398, majf=0, minf=85
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=2560,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=514MiB/s (539MB/s), 514MiB/s-514MiB/s (539MB/s-539MB/s), io=320MiB (336MB), run=622-622msec
  WRITE: bw=534MiB/s (560MB/s), 534MiB/s-534MiB/s (560MB/s-560MB/s), io=320MiB (336MB), run=599-599msec

Disk stats (read/write):
  vdb: ios=1110/265, merge=0/0, ticks=217/1019, in_queue=1237, util=42.07%
Check conventional file seq write, aggr_cnv (async)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: enabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 017c68ac-fd72-471c-83d3-28417be4cd7d
Resetting sequential zones
Writing super block
cnv_seqwr: (g=0): rw=write, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=libaio, iodepth=64
fio-3.32
Starting 1 process

cnv_seqwr: (groupid=0, jobs=1): err= 0: pid=3579: Mon Jan 16 20:43:33 2023
  read: IOPS=4037, BW=505MiB/s (529MB/s)(320MiB/634msec)
    slat (usec): min=9, max=2063, avg=30.25, stdev=47.80
    clat (usec): min=184, max=17021, avg=13633.61, stdev=1604.43
     lat (usec): min=194, max=17031, avg=13663.85, stdev=1601.07
    clat percentiles (usec):
     |  1.00th=[ 4752],  5.00th=[13698], 10.00th=[13698], 20.00th=[13829],
     | 30.00th=[13829], 40.00th=[13829], 50.00th=[13829], 60.00th=[13829],
     | 70.00th=[13829], 80.00th=[13960], 90.00th=[13960], 95.00th=[13960],
     | 99.00th=[16909], 99.50th=[16909], 99.90th=[16909], 99.95th=[16909],
     | 99.99th=[16909]
  write: IOPS=4398, BW=550MiB/s (577MB/s)(320MiB/582msec); 0 zone resets
    slat (usec): min=206, max=554, avg=224.93, stdev=16.22
    clat (usec): min=3, max=14947, avg=14143.09, stdev=1318.99
     lat (usec): min=229, max=15203, avg=14368.02, stdev=1319.51
    clat percentiles (usec):
     |  1.00th=[ 5669],  5.00th=[13960], 10.00th=[13960], 20.00th=[14222],
     | 30.00th=[14222], 40.00th=[14222], 50.00th=[14222], 60.00th=[14353],
     | 70.00th=[14484], 80.00th=[14484], 90.00th=[14615], 95.00th=[14615],
     | 99.00th=[14877], 99.50th=[14877], 99.90th=[15008], 99.95th=[15008],
     | 99.99th=[15008]
   bw (  KiB/s): min=107008, max=548352, per=58.20%, avg=327680.00, stdev=312077.34, samples=2
   iops        : min=  836, max= 4284, avg=2560.00, stdev=2438.10, samples=2
  lat (usec)   : 4=0.02%, 250=0.04%, 500=0.04%, 750=0.04%, 1000=0.06%
  lat (msec)   : 2=0.16%, 4=0.35%, 10=1.82%, 20=97.48%
  cpu          : usr=77.78%, sys=18.68%, ctx=296, majf=0, minf=85
  IO depths    : 1=0.1%, 2=0.1%, 4=0.2%, 8=0.3%, 16=0.6%, 32=1.2%, >=64=97.5%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.1%, >=64=0.0%
     issued rwts: total=2560,2560,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=64

Run status group 0 (all jobs):
   READ: bw=505MiB/s (529MB/s), 505MiB/s-505MiB/s (529MB/s-529MB/s), io=320MiB (336MB), run=634-634msec
  WRITE: bw=550MiB/s (577MB/s), 550MiB/s-550MiB/s (577MB/s-577MB/s), io=320MiB (336MB), run=582-582msec

Disk stats (read/write):
  vdb: ios=1137/264, merge=0/0, ticks=228/1417, in_queue=1645, util=43.35%
PASS

