## Test 0211: Conventional file seq write (direct)

/usr/local/bin/fio
Check conventional file seq write, direct IO (sync)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 625df07f-4e3a-4bda-8a47-05082fc01526
Resetting sequential zones
Writing super block
cnv_seqwr: (g=0): rw=write, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process

cnv_seqwr: (groupid=0, jobs=1): err= 0: pid=3528: Mon Jan 16 20:43:30 2023
  read: IOPS=2438, BW=305MiB/s (320MB/s)(64.0MiB/210msec)
    clat (usec): min=91, max=372, avg=223.47, stdev=60.16
     lat (usec): min=91, max=372, avg=223.57, stdev=60.16
    clat percentiles (usec):
     |  1.00th=[  103],  5.00th=[  129], 10.00th=[  145], 20.00th=[  165],
     | 30.00th=[  188], 40.00th=[  204], 50.00th=[  223], 60.00th=[  245],
     | 70.00th=[  262], 80.00th=[  277], 90.00th=[  302], 95.00th=[  318],
     | 99.00th=[  347], 99.50th=[  363], 99.90th=[  371], 99.95th=[  371],
     | 99.99th=[  371]
  write: IOPS=1759, BW=220MiB/s (231MB/s)(64.0MiB/291msec); 0 zone resets
    clat (usec): min=114, max=2745, avg=306.73, stdev=209.71
     lat (usec): min=310, max=5606, avg=564.19, stdev=418.49
    clat percentiles (usec):
     |  1.00th=[  135],  5.00th=[  157], 10.00th=[  174], 20.00th=[  196],
     | 30.00th=[  215], 40.00th=[  235], 50.00th=[  253], 60.00th=[  277],
     | 70.00th=[  302], 80.00th=[  330], 90.00th=[  433], 95.00th=[  840],
     | 99.00th=[ 1004], 99.50th=[ 1045], 99.90th=[ 2737], 99.95th=[ 2737],
     | 99.99th=[ 2737]
  lat (usec)   : 100=0.20%, 250=55.86%, 500=39.45%, 750=1.56%, 1000=2.34%
  lat (msec)   : 2=0.49%, 4=0.10%
  cpu          : usr=44.69%, sys=3.21%, ctx=1030, majf=0, minf=31
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=512,512,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
   READ: bw=305MiB/s (320MB/s), 305MiB/s-305MiB/s (320MB/s-320MB/s), io=64.0MiB (67.1MB), run=210-210msec
  WRITE: bw=220MiB/s (231MB/s), 220MiB/s-220MiB/s (231MB/s-231MB/s), io=64.0MiB (67.1MB), run=291-291msec

Disk stats (read/write):
  vdb: ios=263/512, merge=0/0, ticks=53/145, in_queue=199, util=78.92%
Check conventional file seq write, direct IO (async)
/dev/vdb: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  6 conventional zones, 6 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 7911cd78-ec47-41e2-99a7-d26770188d67
Resetting sequential zones
Writing super block
cnv_seqwr: (g=0): rw=write, bs=(R) 128KiB-128KiB, (W) 128KiB-128KiB, (T) 128KiB-128KiB, ioengine=libaio, iodepth=64
fio-3.32
Starting 1 process

cnv_seqwr: (groupid=0, jobs=1): err= 0: pid=3539: Mon Jan 16 20:43:30 2023
  read: IOPS=4923, BW=615MiB/s (645MB/s)(64.0MiB/104msec)
    slat (nsec): min=4815, max=36678, avg=9053.58, stdev=2296.67
    clat (usec): min=205, max=13146, avg=11325.34, stdev=3225.07
     lat (usec): min=215, max=13153, avg=11334.40, stdev=3225.38
    clat percentiles (usec):
     |  1.00th=[  865],  5.00th=[ 2868], 10.00th=[ 5473], 20.00th=[10552],
     | 30.00th=[12780], 40.00th=[12780], 50.00th=[12780], 60.00th=[12780],
     | 70.00th=[12911], 80.00th=[12911], 90.00th=[12911], 95.00th=[12911],
     | 99.00th=[13042], 99.50th=[13042], 99.90th=[13173], 99.95th=[13173],
     | 99.99th=[13173]
  write: IOPS=3710, BW=464MiB/s (486MB/s)(64.0MiB/138msec); 0 zone resets
    slat (usec): min=197, max=1408, avg=265.62, stdev=153.96
    clat (usec): min=104, max=34647, avg=14091.55, stdev=4039.99
     lat (usec): min=316, max=36056, avg=14357.17, stdev=4151.66
    clat percentiles (usec):
     |  1.00th=[ 1319],  5.00th=[ 5735], 10.00th=[11994], 20.00th=[13960],
     | 30.00th=[13960], 40.00th=[14091], 50.00th=[14222], 60.00th=[14353],
     | 70.00th=[14484], 80.00th=[14615], 90.00th=[14877], 95.00th=[19792],
     | 99.00th=[30278], 99.50th=[32637], 99.90th=[34866], 99.95th=[34866],
     | 99.99th=[34866]
  lat (usec)   : 250=0.20%, 500=0.29%, 750=0.29%, 1000=0.29%
  lat (msec)   : 2=1.37%, 4=2.83%, 10=8.40%, 20=83.98%, 50=2.34%
  cpu          : usr=85.89%, sys=7.47%, ctx=1036, majf=0, minf=29
  IO depths    : 1=0.2%, 2=0.4%, 4=0.8%, 8=1.6%, 16=3.1%, 32=6.2%, >=64=87.7%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=99.8%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.2%, >=64=0.0%
     issued rwts: total=512,512,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=64

Run status group 0 (all jobs):
   READ: bw=615MiB/s (645MB/s), 615MiB/s-615MiB/s (645MB/s-645MB/s), io=64.0MiB (67.1MB), run=104-104msec
  WRITE: bw=464MiB/s (486MB/s), 464MiB/s-464MiB/s (486MB/s-486MB/s), io=64.0MiB (67.1MB), run=138-138msec

Disk stats (read/write):
  vdb: ios=0/485, merge=0/0, ticks=0/75, in_queue=75, util=52.61%
PASS

