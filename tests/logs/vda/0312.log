## Test 0312: Sequential file explicit-open zone resources

/usr/local/bin/fio
Check explicit-open mounts
/dev/vda: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  0 conventional zones, 12 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: a8a2c0b0-6e47-4440-84de-fb0aef7e02cc
Resetting sequential zones
Writing super block
Check write in less than 12 max open files
writefiles: (g=0): rw=write, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process
writefiles: Laying out IO files (11 files / total 704MiB)

writefiles: (groupid=0, jobs=1): err= 0: pid=5842: Mon Dec 18 02:11:52 2023
  write: IOPS=767, BW=192MiB/s (201MB/s)(704MiB/3667msec); 0 zone resets
    clat (usec): min=911, max=16656, avg=1288.73, stdev=843.77
     lat (usec): min=924, max=16665, avg=1296.35, stdev=844.34
    clat percentiles (usec):
     |  1.00th=[  988],  5.00th=[ 1037], 10.00th=[ 1074], 20.00th=[ 1106],
     | 30.00th=[ 1123], 40.00th=[ 1156], 50.00th=[ 1172], 60.00th=[ 1205],
     | 70.00th=[ 1237], 80.00th=[ 1270], 90.00th=[ 1385], 95.00th=[ 1663],
     | 99.00th=[ 3195], 99.50th=[ 9110], 99.90th=[14353], 99.95th=[15270],
     | 99.99th=[16712]
   bw (  KiB/s): min=159232, max=215552, per=100.00%, avg=196694.29, stdev=22366.27, samples=7
   iops        : min=  622, max=  842, avg=768.29, stdev=87.33, samples=7
  lat (usec)   : 1000=1.67%
  lat (msec)   : 2=96.77%, 4=0.85%, 10=0.39%, 20=0.32%
  cpu          : usr=0.05%, sys=0.08%, ctx=5595, majf=0, minf=13
  IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%
     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%
     issued rwts: total=0,2816,0,0 short=0,0,0,0 dropped=0,0,0,0
     latency   : target=0, window=0, percentile=100.00%, depth=1

Run status group 0 (all jobs):
  WRITE: bw=192MiB/s (201MB/s), 192MiB/s-192MiB/s (201MB/s-201MB/s), io=704MiB (738MB), run=3667-3667msec

Disk stats (read/write):
  vda: ios=11/2794, merge=0/0, ticks=6/3456, in_queue=3462, util=96.95%
Check write in exactly 12 max open files
truncate: cannot open '/home/sam/zonefs-tools/tests/vda-mnt/seq/11' for writing: No such file or directory
writefiles: (g=0): rw=write, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=psync, iodepth=1
fio-3.32
Starting 1 process
writefiles: Laying out IO files (12 files / total 768MiB)
fio: file creation disallowed by allow_file_create=0


Run status group 0 (all jobs):
fio write failed
FAILED

