## Test 0604: Sequential file write IO error (errors=zone-offline, sync)

Check handling of sequential file write IO error
/dev/vda: 1572864 512-byte sectors (0 GiB)
  Host-managed device
  12 zones of 131072 512-byte sectors (64 MiB)
  0 conventional zones, 12 sequential zones
  0 read-only zones, 0 offline zones
Format:
  11 usable zones
  Aggregate conventional zones: disabled
  File UID: 0
  File GID: 0
  File access permissions: 640
  FS UUID: 497b9257-8759-48e9-ad01-81a797f59846
Resetting sequential zones
Writing super block
Write seq file 0
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.00202894 s, 2.0 MB/s
Write seq file 0 zone directly
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.00394509 s, 1.0 MB/s
Try writing seq file 0
dd: error writing '/home/sam/zonefs-tools/tests/vda-mnt/seq/0': Input/output error
1+0 records in
0+0 records out
0 bytes copied, 0.00673464 s, 0.0 kB/s
Try file truncate to 0 (zone reset)
truncate: cannot open '/home/sam/zonefs-tools/tests/vda-mnt/seq/0' for writing: Operation not permitted
Check permissions
Check file size and permissions after eviction
Try reading seq file 0
dd: error reading '/home/sam/zonefs-tools/tests/vda-mnt/seq/0': Operation not permitted
0+0 records in
0+0 records out
0 bytes copied, 0.00197951 s, 0.0 kB/s
Try writing seq file 1
1+0 records in
1+0 records out
4096 bytes (4.1 kB, 4.0 KiB) copied, 0.00120552 s, 3.4 MB/s
PASS

